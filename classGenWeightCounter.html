<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UserUtils: GenWeightCounter Class Reference</title>
<!-- Overriding the tabs css with our own -->
<!--link href="tabs.css" rel="stylesheet" type="text/css"/-->
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--Explicitly calling the including the stuff required for search-->
<!--<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
-->
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UserUtils
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classGenWeightCounter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">GenWeightCounter Class Reference<div class="ingroups"><a class="el" href="group__EDMUtils.html">EDMUtils</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for GenWeightCounter:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classGenWeightCounter.png" usemap="#GenWeightCounter_map" alt=""/>
  <map id="GenWeightCounter_map" name="GenWeightCounter_map">
<area href="classusr_1_1PluginAlias.html" alt="usr::PluginAlias&lt; edm::one::EDProducer&lt; edm::one::WatchRuns, edm::EndRunProducer &gt; &gt;" shape="rect" coords="0,56,527,80"/>
  </map>
</div></div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Additional examples of how to allow a edm plugins to process run/lumi level production could be found in the CMSSW <a href="http://cmsdoxygen.web.cern.ch/cmsdoxygen/CMSSW_10_1_7/doc/html/d0/d83/EventCountProducer_8cc_source.html">EventCountProducer</a> Class.</p>
<p >The rational of this class is that the sum-of-weights is frequently used for calculating the selection efficiency and for isolating the impacts of generator uncertainties (PDF and QCD scale) on acceptance and theoretical cross sections.</p>
<p >As the framework is setup such that run-level data can only be accessed at the end fo the run, the user must define the weight families that needs to be summed in the parameter set with the type <code>vint32</code> and under the name "idlist". Weights listed in EDM files under the specified id's would first be be divided by the weight under the central ID (i.e. the first id in the provided list, then the normalized weights would be summed and stored at cache level.</p>
<p >One nuance that needs to be taken care of is the sign of the weights, since using negative weights is a common strategy to correct for higher order behaviours. The "divide" operation described earlier would only scale by the absolute value of the central weight, leaving the sign of the various weights untouched.</p>
<p >Note that in the case that the user provides the weight id of 0, the input file is assumed to be for data, and the sum of events will be calculated instead (no additional PDF/QCD weights would be calculated).</p>
<p >For reading the outputs of this plugin, read the deatiled sections of the constructor. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1ea9036fef7d328af162b1090beb1039"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGenWeightCounter.html#a1ea9036fef7d328af162b1090beb1039">GenWeightCounter</a> (const edm::ParameterSet &amp;)</td></tr>
<tr class="memdesc:a1ea9036fef7d328af162b1090beb1039"><td class="mdescLeft">&#160;</td><td class="mdescRight">defining the requirements as wells as defining the output names.  <a href="classGenWeightCounter.html#a1ea9036fef7d328af162b1090beb1039">More...</a><br /></td></tr>
<tr class="separator:a1ea9036fef7d328af162b1090beb1039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classusr_1_1PluginAlias"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classusr_1_1PluginAlias')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classusr_1_1PluginAlias.html">usr::PluginAlias&lt; edm::one::EDProducer&lt; edm::one::WatchRuns, edm::EndRunProducer &gt; &gt;</a></td></tr>
<tr class="memitem:a6c402bf55d2698ba5707e7cb68100767 inherit pub_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#a6c402bf55d2698ba5707e7cb68100767">PluginAlias</a> (const edm::ParameterSet &amp;config)</td></tr>
<tr class="separator:a6c402bf55d2698ba5707e7cb68100767 inherit pub_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a67bd2f73261e55a13dfcea6a1248f7e8"><td class="memItemLeft" align="right" valign="top"><a id="a67bd2f73261e55a13dfcea6a1248f7e8" name="a67bd2f73261e55a13dfcea6a1248f7e8"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>produce</b> (edm::Event &amp;, const edm::EventSetup &amp;) override</td></tr>
<tr class="separator:a67bd2f73261e55a13dfcea6a1248f7e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89f5663b680b1f4c0e14cca6093e3d63"><td class="memItemLeft" align="right" valign="top"><a id="a89f5663b680b1f4c0e14cca6093e3d63" name="a89f5663b680b1f4c0e14cca6093e3d63"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>beginRun</b> (const edm::Run &amp;, const edm::EventSetup &amp;) override</td></tr>
<tr class="separator:a89f5663b680b1f4c0e14cca6093e3d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace1b995fe256fe7517262bc9528596cf"><td class="memItemLeft" align="right" valign="top"><a id="ace1b995fe256fe7517262bc9528596cf" name="ace1b995fe256fe7517262bc9528596cf"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>endRun</b> (const edm::Run &amp;, const edm::EventSetup &amp;) override</td></tr>
<tr class="separator:ace1b995fe256fe7517262bc9528596cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52826a38d5d25a55a66c28e4a04fc2b4"><td class="memItemLeft" align="right" valign="top"><a id="a52826a38d5d25a55a66c28e4a04fc2b4" name="a52826a38d5d25a55a66c28e4a04fc2b4"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>endRunProduce</b> (edm::Run &amp;, const edm::EventSetup &amp;) override</td></tr>
<tr class="separator:a52826a38d5d25a55a66c28e4a04fc2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a17506ecd9c35d8531cf69786aaffd06d"><td class="memItemLeft" align="right" valign="top"><a id="a17506ecd9c35d8531cf69786aaffd06d" name="a17506ecd9c35d8531cf69786aaffd06d"></a>
const edm::EDGetToken&#160;</td><td class="memItemRight" valign="bottom"><b>_lhesrc</b></td></tr>
<tr class="separator:a17506ecd9c35d8531cf69786aaffd06d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9414fc2d78bc01c37aa7bdd4beb76412"><td class="memItemLeft" align="right" valign="top"><a id="a9414fc2d78bc01c37aa7bdd4beb76412" name="a9414fc2d78bc01c37aa7bdd4beb76412"></a>
std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_idlist</b></td></tr>
<tr class="separator:a9414fc2d78bc01c37aa7bdd4beb76412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a760804189518e6a7fe45d519df070311"><td class="memItemLeft" align="right" valign="top"><a id="a760804189518e6a7fe45d519df070311" name="a760804189518e6a7fe45d519df070311"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>_evtsum</b></td></tr>
<tr class="separator:a760804189518e6a7fe45d519df070311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ff699974f8d5e25550f4f92b2fc780"><td class="memItemLeft" align="right" valign="top"><a id="a59ff699974f8d5e25550f4f92b2fc780" name="a59ff699974f8d5e25550f4f92b2fc780"></a>
std::map&lt; int, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_sumlist</b></td></tr>
<tr class="separator:a59ff699974f8d5e25550f4f92b2fc780"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classusr_1_1PluginAlias"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classusr_1_1PluginAlias')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classusr_1_1PluginAlias.html">usr::PluginAlias&lt; edm::one::EDProducer&lt; edm::one::WatchRuns, edm::EndRunProducer &gt; &gt;</a></td></tr>
<tr class="memitem:a10395688ec0095c3dc4b76b69e7fd32e inherit pro_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top">edm::EDGetToken&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#a10395688ec0095c3dc4b76b69e7fd32e">GetToken</a> (const std::string &amp;configtag)</td></tr>
<tr class="memdesc:a10395688ec0095c3dc4b76b69e7fd32e inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">template class for getting the EdmToken from the initializer configuration parameter set.  <a href="classusr_1_1PluginAlias.html#a10395688ec0095c3dc4b76b69e7fd32e">More...</a><br /></td></tr>
<tr class="separator:a10395688ec0095c3dc4b76b69e7fd32e inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4b67737bf5d636a68af2db49fc87023 inherit pro_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="ad4b67737bf5d636a68af2db49fc87023" name="ad4b67737bf5d636a68af2db49fc87023"></a>
edm::EDGetToken&#160;</td><td class="memItemRight" valign="bottom"><b>GetRunToken</b> (const std::string &amp;configtag)</td></tr>
<tr class="memdesc:ad4b67737bf5d636a68af2db49fc87023 inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same template function as <a class="el" href="classusr_1_1PluginAlias.html#a10395688ec0095c3dc4b76b69e7fd32e" title="template class for getting the EdmToken from the initializer configuration parameter set.">GetToken()</a> except for getting Run level objects. <br /></td></tr>
<tr class="separator:ad4b67737bf5d636a68af2db49fc87023 inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef1918253d6c9b8b148c417b4ee8b96 inherit pro_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="acef1918253d6c9b8b148c417b4ee8b96" name="acef1918253d6c9b8b148c417b4ee8b96"></a>
edm::Handle&lt; TYPE &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>MakeHandle</b> (const edm::Event &amp;event, const edm::EDGetToken tok)</td></tr>
<tr class="memdesc:acef1918253d6c9b8b148c417b4ee8b96 inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construction for a handle. <br /></td></tr>
<tr class="separator:acef1918253d6c9b8b148c417b4ee8b96 inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aef1fd1deae09af9daeb7fa30495800 inherit pro_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="a5aef1fd1deae09af9daeb7fa30495800" name="a5aef1fd1deae09af9daeb7fa30495800"></a>
TObject *&#160;</td><td class="memItemRight" valign="bottom"><b>GetFileObj</b> (const std::string &amp;filetag, const std::string objtag)</td></tr>
<tr class="memdesc:a5aef1fd1deae09af9daeb7fa30495800 inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">getting a clone of an object described in a file. See static function for full documentation. <br /></td></tr>
<tr class="separator:a5aef1fd1deae09af9daeb7fa30495800 inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6657b53f9b2c7ab2ebea671a4efabdda inherit pro_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="a6657b53f9b2c7ab2ebea671a4efabdda" name="a6657b53f9b2c7ab2ebea671a4efabdda"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>GetFilePath</b> (const std::string &amp;filetag)</td></tr>
<tr class="memdesc:a6657b53f9b2c7ab2ebea671a4efabdda inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">getting the full path to a file. See static function for full documentation. <br /></td></tr>
<tr class="separator:a6657b53f9b2c7ab2ebea671a4efabdda inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_methods_classusr_1_1PluginAlias"><td colspan="2" onclick="javascript:toggleInherit('pro_static_methods_classusr_1_1PluginAlias')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="classusr_1_1PluginAlias.html">usr::PluginAlias&lt; edm::one::EDProducer&lt; edm::one::WatchRuns, edm::EndRunProducer &gt; &gt;</a></td></tr>
<tr class="memitem:afdb65b17d8acd8e29523a01a207c9a84 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top">static TObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#afdb65b17d8acd8e29523a01a207c9a84">GetFileObj</a> (const edm::ParameterSet &amp;config, const std::string &amp;filetag, const std::string &amp;objtag)</td></tr>
<tr class="memdesc:afdb65b17d8acd8e29523a01a207c9a84 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a file path in the form of an EDM::FileInPath, and a object key as a parameter set string.  <a href="classusr_1_1PluginAlias.html#afdb65b17d8acd8e29523a01a207c9a84">More...</a><br /></td></tr>
<tr class="separator:afdb65b17d8acd8e29523a01a207c9a84 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f1cb484f629118ec7c9baa27944c9d3 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="a2f1cb484f629118ec7c9baa27944c9d3" name="a2f1cb484f629118ec7c9baa27944c9d3"></a>
static std::string&#160;</td><td class="memItemRight" valign="bottom"><b>GetFilePath</b> (const edm::ParameterSet &amp;config, const std::string &amp;filetag)</td></tr>
<tr class="memdesc:a2f1cb484f629118ec7c9baa27944c9d3 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">returing the string to a path in the parameterset if an EDM::FileInPath was used. <br /></td></tr>
<tr class="separator:a2f1cb484f629118ec7c9baa27944c9d3 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1ea9036fef7d328af162b1090beb1039" name="a1ea9036fef7d328af162b1090beb1039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea9036fef7d328af162b1090beb1039">&#9670;&nbsp;</a></span>GenWeightCounter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">GenWeightCounter::GenWeightCounter </td>
          <td>(</td>
          <td class="paramtype">const edm::ParameterSet &amp;&#160;</td>
          <td class="paramname"><em>iConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >The parameterset passed to the plugins requires two things:</p><ul>
<li>An input tag telling the plugin where to extract the lhe information</li>
<li>A <code>vint32</code> telling the plugin which weight variation to take into calculation. If you unsure which weight variations you should use, see <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/SWGuideDataFormatGeneratorInterface">this page</a> for more information. If you unsure which weight variations is contained in your edm file, consider the <a class="el" href="DumpLHERunInfo_8cc.html">DumpLHERunInfo</a> command provided by yours truly.</li>
</ul>
<p >The output is stored in the form of the new <a class="el" href="classusr_1_1Counter.html" title="Class exposed to the EDM ROOT framework to allow for run-level caching.">usr::Counter</a> class in the run level, under the name "EventsCount" (for the simple sum of events), and the "WeightSum&lt;id&gt;" for the sum-of-weight of a specific variation. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/EDMUtils/plugins/<a class="el" href="GenWeightCounter_8cc.html">GenWeightCounter.cc</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/>
  <address class="footer">
    <small>
    Generated by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.9.4
    </small>
  </address>
  <address class="footer">
    <small>
    Source code hosted on<a href="http://github.com">GitHub</a>
    </small>
  </address>
  <address class="footer">
    <small id="debugger">
    Debug:
    </small>
  </address>
<!-- custom Javascript stuff -->
  <script type="text/javascript" src="customjs/summary.js"></script>
</body>
</html>

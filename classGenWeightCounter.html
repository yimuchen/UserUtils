<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UserUtils: GenWeightCounter Class Reference</title>
<!-- Overriding the tabs css with our own -->
<!--link href="tabs.css" rel="stylesheet" type="text/css"/-->
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--Explicitly calling the including the stuff required for search-->
<!--<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
-->
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" />
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UserUtils
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classGenWeightCounter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">GenWeightCounter Class Reference<div class="ingroups"><a class="el" href="group__EDMUtils.html">EDMUtils</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for GenWeightCounter:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classGenWeightCounter.png" usemap="#GenWeightCounter_map" alt=""/>
  <map id="GenWeightCounter_map" name="GenWeightCounter_map">
<area href="classusr_1_1PluginAlias.html" title="class for reducting the verbosity of the various edm plugin calls. " alt="usr::PluginAlias" shape="rect" coords="426,56,842,80"/>
</map>
 </div></div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Addtional examples of how to allow a edm plugins to process run/lumi level production coudl be found in the CMSSW <a href="http://cmsdoxygen.web.cern.ch/cmsdoxygen/CMSSW_10_1_7/doc/html/d0/d83/EventCountProducer_8cc_source.html">EventCountProducer</a> Class.</p>
<p>The rational of this class is that the sum-of-weights is frequently used for calculating the selection efficiency and for isolating the impacts of generator uncertainties (PDF and QCD scale) on acceptance and theoretical cross sections.</p>
<p>As the framework is setup such that run-level data can only be accessed at the end fo the run, the user must define the weight families that needs to be summed in the parameter set with the type <code>vint32</code> and under the name "idlist". Weights listed in EDM files under the specified id's would first be be divided by the weight under the central ID (i.e. the first id in the provided list, then the normalised weights would be summed and stored at cache level.</p>
<p>One nuance that needs to be taken care of is the sign of the weights, since using negative weights is a common statergy to correct for higher order behaviours. The "divide" operation described earlier would only scale by the absolute value of the central weight, leaving the sign of the various weights untouched.</p>
<p>Note that in the case that the user provides the weight id of 0, the input file is assumed to be for data, and the sum of events will be calculated instead (no addtional PDF/QCD weights would be calculated).</p>
<p>For reading the outputs of this plugin, read the deatiled sections of the constructor. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1ea9036fef7d328af162b1090beb1039"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGenWeightCounter.html#a1ea9036fef7d328af162b1090beb1039">GenWeightCounter</a> (const edm::ParameterSet &amp;)</td></tr>
<tr class="memdesc:a1ea9036fef7d328af162b1090beb1039"><td class="mdescLeft">&#160;</td><td class="mdescRight">defining the requirements as wells as defining the output names.  <a href="#a1ea9036fef7d328af162b1090beb1039">More...</a><br /></td></tr>
<tr class="separator:a1ea9036fef7d328af162b1090beb1039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classusr_1_1PluginAlias"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classusr_1_1PluginAlias')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classusr_1_1PluginAlias.html">usr::PluginAlias</a></td></tr>
<tr class="memitem:ada4118a11388fb0f7753b14b08e719ac inherit pub_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#ada4118a11388fb0f7753b14b08e719ac">PluginAlias</a> (const edm::ParameterSet &amp;config)</td></tr>
<tr class="separator:ada4118a11388fb0f7753b14b08e719ac inherit pub_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a67bd2f73261e55a13dfcea6a1248f7e8"><td class="memItemLeft" align="right" valign="top"><a id="a67bd2f73261e55a13dfcea6a1248f7e8"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>produce</b> (edm::Event &amp;, const edm::EventSetup &amp;) override</td></tr>
<tr class="separator:a67bd2f73261e55a13dfcea6a1248f7e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89f5663b680b1f4c0e14cca6093e3d63"><td class="memItemLeft" align="right" valign="top"><a id="a89f5663b680b1f4c0e14cca6093e3d63"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>beginRun</b> (const edm::Run &amp;, const edm::EventSetup &amp;) override</td></tr>
<tr class="separator:a89f5663b680b1f4c0e14cca6093e3d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace1b995fe256fe7517262bc9528596cf"><td class="memItemLeft" align="right" valign="top"><a id="ace1b995fe256fe7517262bc9528596cf"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>endRun</b> (const edm::Run &amp;, const edm::EventSetup &amp;) override</td></tr>
<tr class="separator:ace1b995fe256fe7517262bc9528596cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52826a38d5d25a55a66c28e4a04fc2b4"><td class="memItemLeft" align="right" valign="top"><a id="a52826a38d5d25a55a66c28e4a04fc2b4"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>endRunProduce</b> (edm::Run &amp;, const edm::EventSetup &amp;) override</td></tr>
<tr class="separator:a52826a38d5d25a55a66c28e4a04fc2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a17506ecd9c35d8531cf69786aaffd06d"><td class="memItemLeft" align="right" valign="top"><a id="a17506ecd9c35d8531cf69786aaffd06d"></a>
const edm::EDGetToken&#160;</td><td class="memItemRight" valign="bottom"><b>_lhesrc</b></td></tr>
<tr class="separator:a17506ecd9c35d8531cf69786aaffd06d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9414fc2d78bc01c37aa7bdd4beb76412"><td class="memItemLeft" align="right" valign="top"><a id="a9414fc2d78bc01c37aa7bdd4beb76412"></a>
std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_idlist</b></td></tr>
<tr class="separator:a9414fc2d78bc01c37aa7bdd4beb76412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a760804189518e6a7fe45d519df070311"><td class="memItemLeft" align="right" valign="top"><a id="a760804189518e6a7fe45d519df070311"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>_evtsum</b></td></tr>
<tr class="separator:a760804189518e6a7fe45d519df070311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ff699974f8d5e25550f4f92b2fc780"><td class="memItemLeft" align="right" valign="top"><a id="a59ff699974f8d5e25550f4f92b2fc780"></a>
std::map&lt; int, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_sumlist</b></td></tr>
<tr class="separator:a59ff699974f8d5e25550f4f92b2fc780"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classusr_1_1PluginAlias"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classusr_1_1PluginAlias')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classusr_1_1PluginAlias.html">usr::PluginAlias</a></td></tr>
<tr class="memitem:a4d206b103b9118cde4132222e769c01e inherit pro_methods_classusr_1_1PluginAlias"><td class="memTemplParams" colspan="2">template&lt;typename TYPE &gt; </td></tr>
<tr class="memitem:a4d206b103b9118cde4132222e769c01e inherit pro_methods_classusr_1_1PluginAlias"><td class="memTemplItemLeft" align="right" valign="top">edm::EDGetToken&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#a4d206b103b9118cde4132222e769c01e">GetToken</a> (const std::string &amp;configtag)</td></tr>
<tr class="memdesc:a4d206b103b9118cde4132222e769c01e inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">template class for getting the EdmToken from the initlializor configuration parameter set.  <a href="classusr_1_1PluginAlias.html#a4d206b103b9118cde4132222e769c01e">More...</a><br /></td></tr>
<tr class="separator:a4d206b103b9118cde4132222e769c01e inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9bf41018d012b5520d00a1ef959b491 inherit pro_methods_classusr_1_1PluginAlias"><td class="memTemplParams" colspan="2"><a id="ae9bf41018d012b5520d00a1ef959b491"></a>
template&lt;typename TYPE &gt; </td></tr>
<tr class="memitem:ae9bf41018d012b5520d00a1ef959b491 inherit pro_methods_classusr_1_1PluginAlias"><td class="memTemplItemLeft" align="right" valign="top">edm::EDGetToken&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#ae9bf41018d012b5520d00a1ef959b491">GetRunToken</a> (const std::string &amp;configtag)</td></tr>
<tr class="memdesc:ae9bf41018d012b5520d00a1ef959b491 inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same template function as <a class="el" href="classusr_1_1PluginAlias.html#a4d206b103b9118cde4132222e769c01e" title="template class for getting the EdmToken from the initlializor configuration parameter set...">GetToken()</a> except for getting Run level objects. <br /></td></tr>
<tr class="separator:ae9bf41018d012b5520d00a1ef959b491 inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bbe23e50cb2288c761a7462a03570ad inherit pro_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="a9bbe23e50cb2288c761a7462a03570ad"></a>
TObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#a9bbe23e50cb2288c761a7462a03570ad">GetFileObj</a> (const std::string &amp;filetag, const std::string objtag)</td></tr>
<tr class="memdesc:a9bbe23e50cb2288c761a7462a03570ad inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">getting a clone of an object described in a file. See static function for full documentation. <br /></td></tr>
<tr class="separator:a9bbe23e50cb2288c761a7462a03570ad inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a218ebfc8a02167caf2d0bd2c755cff2c inherit pro_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="a218ebfc8a02167caf2d0bd2c755cff2c"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#a218ebfc8a02167caf2d0bd2c755cff2c">GetFilePath</a> (const std::string &amp;filetag)</td></tr>
<tr class="memdesc:a218ebfc8a02167caf2d0bd2c755cff2c inherit pro_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">getting the full path to a file. See staic function for full documentation. <br /></td></tr>
<tr class="separator:a218ebfc8a02167caf2d0bd2c755cff2c inherit pro_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_methods_classusr_1_1PluginAlias"><td colspan="2" onclick="javascript:toggleInherit('pro_static_methods_classusr_1_1PluginAlias')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="classusr_1_1PluginAlias.html">usr::PluginAlias</a></td></tr>
<tr class="memitem:ad24a93fe45ed6d985995d987064e8bda inherit pro_static_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="ad24a93fe45ed6d985995d987064e8bda"></a>
static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#ad24a93fe45ed6d985995d987064e8bda">GetFilePath</a> (const edm::ParameterSet &amp;, const std::string &amp;)</td></tr>
<tr class="memdesc:ad24a93fe45ed6d985995d987064e8bda inherit pro_static_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">returing the string to a path in the parameterset if an EDM::FileInPath was used. <br /></td></tr>
<tr class="separator:ad24a93fe45ed6d985995d987064e8bda inherit pro_static_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42c1b7293bdbb0c5fdb9cf618139d688 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="memItemLeft" align="right" valign="top"><a id="a42c1b7293bdbb0c5fdb9cf618139d688"></a>
static TObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classusr_1_1PluginAlias.html#a42c1b7293bdbb0c5fdb9cf618139d688">GetFileObj</a> (const edm::ParameterSet &amp;config, const std::string &amp;file, const std::string &amp;objname)</td></tr>
<tr class="memdesc:a42c1b7293bdbb0c5fdb9cf618139d688 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a file path in the form of an EDM::FileInPath, and a object tag as a parameter set string. This function return a clone to the object stored in a file for analysis use. <br /></td></tr>
<tr class="separator:a42c1b7293bdbb0c5fdb9cf618139d688 inherit pro_static_methods_classusr_1_1PluginAlias"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1ea9036fef7d328af162b1090beb1039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea9036fef7d328af162b1090beb1039">&#9670;&nbsp;</a></span>GenWeightCounter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">GenWeightCounter::GenWeightCounter </td>
          <td>(</td>
          <td class="paramtype">const edm::ParameterSet &amp;&#160;</td>
          <td class="paramname"><em>iConfig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The parameterset passed to the plugins requires two things:</p><ul>
<li>an input tag telling the plugin where to extract the lhe information</li>
<li>an vint32 telling the plugin which weight variation to take into calculation. If you unsure which weight variations you should use, see <a href="https://twiki.cern.ch/twiki/bin/view/CMSPublic/SWGuideDataFormatGeneratorInterface">this page</a> for more information. If you unsure which weight varitions is contained in your edm file, consider the <a class="el" href="DumpLHERunInfo_8cc.html">DumpLHERunInfo</a> command provided by yours truely.</li>
</ul>
<p>The output is stored in the form of the new <a class="el" href="classusr_1_1Counter.html" title="Class exposed to the EDM ROOT framework to allow for run-level caching. ">usr::Counter</a> class in the run level, under the name "EventsCount" (for the simple sum of events), and the "WeightSum&lt;id&gt;" for the sum-of-weight of a specific variation. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/ensc/Homework/CMS/CMSSW_src/UserUtils/EDMUtils/plugins/<a class="el" href="GenWeightCounter_8cc.html">GenWeightCounter.cc</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/>
  <address class="footer">
    <small>
    Generated by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.14
    </small>
  </address>
  <address class="footer">
    <small>
    Source code hosted on<a href="http://github.com">GitHub</a>
    </small>
  </address>
  <address class="footer">
    <small id="debugger">
    Debug:
    </small>
  </address>
<!-- custom Javascript stuff -->
  <script type="text/javascript" src="customjs/summary.js"></script>
</body>
</html>
